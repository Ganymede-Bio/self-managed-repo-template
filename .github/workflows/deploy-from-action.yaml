name: Deploy Changed Flows to Ganymede From Action

on:
    workflow_dispatch:
        inputs:
            authorEmail:
                description: 'Email of the author for the commit that is a Ganymede user'
                required: true
    push:
        branches:
            - main
env:
    ENVIRONMENT: ENVIRONMENT # REPLACE
jobs:
    detect-changes:
        runs-on: ubuntu-latest
        environment: ENVIRONMENT # REPLACE
        steps:
          - name: Commit to Ganymede
            uses: ganymede-bio/flow-commit-action@v1
            with:
                environment: ${{ env.ENVIRONMENT }}
                ganymede_subdomain: ${{ vars.GANYMEDE_SUBDOMAIN }}
                ganymede_api_token: ${{ secrets.GANYMEDE_API_TOKEN }}
                author_email: ${{ inputs.authorEmail }}
